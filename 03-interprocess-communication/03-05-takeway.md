# ü§ù 03-04-Takeway

* L'architettura a microservizi √® un'architettura distribuita, quindi la comunicazione tra processi svolge un ruolo chiave.&#x20;
* √à essenziale gestire attentamente l'evoluzione dell'API di un servizio. Le modifiche compatibili all'indietro sono le pi√π semplici da effettuare perch√© non influiscono sui client. Se apporti una modifica incisiva all'API di un servizio, probabilmente dovr√† supportare sia le vecchie che le nuove versioni finch√© i client non saranno aggiornati.
* Esistono numerose tecnologie di comunicazione tra processi, ognuna con diversi compromessi. Una decisione chiave di progettazione √® scegliere tra un modello di invocazione di procedure remote sincrone o il modello asincrono di messaggistica. I protocolli di invocazione sincrona di procedure remote, come REST, sono i pi√π facili da utilizzare. Tuttavia, i servizi dovrebbero idealmente comunicare utilizzando la messaggistica asincrona per aumentare la disponibilit√†.&#x20;
* Per prevenire che i guasti si propaghino attraverso un sistema, un client di servizio che utilizza un protocollo sincrono deve essere progettato per gestire guasti parziali, cio√® quando il servizio invocato √® gi√π o presenta latenza elevata. In particolare, deve utilizzare timeout durante le richieste, limitare il numero di richieste in sospeso e utilizzare il modello Circuit Breaker per evitare di effettuare chiamate a un servizio in errore.&#x20;
* Un'architettura che utilizza protocolli sincroni deve includere un meccanismo di scoperta del servizio affinch√© i client possano determinare la posizione di rete di un'istanza del servizio. L'approccio pi√π semplice √® utilizzare il meccanismo di scoperta del servizio implementato dalla piattaforma di distribuzione: i modelli Server-side Discovery e 3rd Party Registration. Tuttavia, un approccio alternativo √® implementare la scoperta del servizio a livello di applicazione: i modelli Client-side Discovery e Self Registration. √à pi√π impegnativo, ma gestisce lo scenario in cui i servizi vengono eseguiti su piattaforme di distribuzione multiple
* Un buon modo per progettare un'architettura basata sulla messaggistica √® utilizzare il modello di messaggi e canali, che astrae i dettagli del sistema di messaggistica sottostante. √à quindi possibile mappare tale progettazione su un'infrastruttura di messaggistica specifica, di solito basata su message broker (broker di messaggi).
* Una delle principali sfide nell'uso della messaggistica √® l'aggiornamento atomico del database e la pubblicazione di un messaggio. Una buona soluzione √® utilizzare il pattern Transactional Outbox e scrivere prima il messaggio nel database come parte della transazione del database. Un processo separato recupera quindi il messaggio dal database utilizzando il pattern Polling Publisher o il pattern Transaction Log Tailing e lo pubblica sul broker di messaggi.
